<script>
var questionOnTable;
var questioningReporter;
var afterThis;

function Knowledge () {
  this.specInterp = function(number){
    var specialtyIndex = ["General Interest", "Foreign Interest", "Domestic Interest"]
    return specialtyIndex[number];
  }
}

function QuestionDeck() {
  this.questions = [];
    this.count = function() {
      return this.questions.length;
    }
  this.draw = function() {
    /*var newQCard = this.questions[(this.count - 1)];
    this.questions[(this.count - 1)] = null;
    return newQCard;*/
    return this.questions.pop();
  }
}

qD = new QuestionDeck;

function QuestionCard (specialty, difficulty) {
  this.specialty = specialty;
  this.difficulty = difficulty;
}


function Person(name, job, specialty) {
  this.name = name;
  this.job = job;
  this.specialty = specialty;
  }


function Reporter(name, specialty) {
  this.name = name;
  this.job = "Reporter";
  this.specialty = specialty;
  /* Reporters like to ask questions about their specialty. 
  If a question is in their specialty, they ask it.
  Otherwise, there's a 50-50 chance they'll discard it and go to the next question in the stack */
  this.wantsToAsk = function(questionType) {
    if (questionType == this.specialty) {
      return true
    }
    else {
      var coinFlip;
      coinFlip = Math.floor(Math.random() * 2) 
      return coinFlip //This will be a boolean 0 or 1 so we don't have to write another if-else
    }
  }
  /*Before the panel begins, reporters write questions and put it on the stack.
  FUTURE FEATURE: They're more likely to write questions about their specialty */
  this.writeAQuestion = function() {
    var randQType;
    randQType = Math.floor(Math.random() * 3);
    var questionDiff;
    questionDiff = Math.floor(Math.random() * 3);
    //Treat the question deck as a stack, find the next available slot and put the new question card there. Push would be a better option
    var i;
    i = 0;
    while((typeof qD.questions[i]) != "undefined") {
      i++
    }
    qD.questions[i] = new QuestionCard(randQType, questionDiff);
  } 
  this.askAQuestion = function() {
    console.log(this.name + " draws a question off the deck.")
    var currentQ = qD.draw();
    if (this.wantsToAsk(currentQ.specialty)) {
      console.log(this.name + " likes this " + this.specInterp(currentQ.specialty) + " question. They're about to ask it.")
      questionOnTable = currentQ;
    }
    else {
      console.log(this.name + " tosses the " + this.specInterp(currentQ.specialty)+ " question card away in disgust. They're drawing a new question.")
      this.askAQuestion();
    }
  }
}

function Minister(name, specialty) {
  this.name = name;
  this.job = "Minister";
  this.specialty = specialty;
  this.previous = 0;
  this.next = 0;
  this.intComp = function() {
    switch(this.specialty) {
      case 0:
      this.gen = 7;
      this.foreign = 5;
      this.domestic = 5;
      break;

      case 1: 
      this.gen = 4;
      this.foreign = 10;
      this.domestic = 3;
      break;

      case 2: 
      this.gen = 4;
      this.foreign = 3;
      this.domestic = 10;
      break;
    }
  }
}
QuestionCard.prototype = new Knowledge();
Person.prototype = new Knowledge();
Reporter.prototype = new Person();
Minister.prototype = new Person();

var bob = new Reporter("Robert", 0);
var beth = new Reporter("Elizabeth", 1);
var bill = new Reporter("William", 2);

//each reporter writes three questions
for (i = 0; i < 3; i++) {
  bob.writeAQuestion();
  beth.writeAQuestion();
  bill.writeAQuestion();
}
function ReporterQueue() {
  this.repQueue = [bob, beth, bill];
  //this.startQueue = function() {} build a queue from scratch
  this.nextRep = function () {
    questioningReporter = this.repQueue.splice(0, 1)[0];
  }
  this.repDone = function () {
    this.repQueue[this.repQueue.length] =  questioningReporter;
  }
  this.repAfterThisOne = function () {
    return this.repQueue[0];
  }
} 

var thisLine = new ReporterQueue();

var saul;
var sam;
var sil;
saul = new Minister("Saul", 1);
sam = new Minister("Samantha", 0);
sil = new Minister("Silas", 2);
saul.intComp();
saul.pervious = null;
saul.next = sam;

sam.intComp();
sam.previous = saul;
sam.next = sil;

sil.intComp();
sil.previous = sam;
sil.next = null;



</script>